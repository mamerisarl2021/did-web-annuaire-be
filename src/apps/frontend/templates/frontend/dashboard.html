{% extends "frontend/base.html" %}
{% block title %}Dashboard â€” AnnuaireDID{% endblock %}

{% block body %}
<div class="auth-page">
  <div class="card" style="max-width: 28rem;">
    <div class="brand">
      <h1><span>Annuaire</span>DID</h1>
      <p>Redirecting...</p>
    </div>
    <div id="alert-box"></div>
    <p id="loading-msg" style="text-align:center;color:var(--text-muted);">Loading your workspace...</p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  if (!Auth.isLoggedIn()) {
    window.location.href = "{% url 'frontend:login' %}";
  } else {
    Auth.me().then(user => {
      if (user.is_superadmin) {
        window.location.href = "/superadmin/";
      } else {
        window.location.href = "/workspace/";
      }
    }).catch(() => {
      Auth.clearTokens();
      window.location.href = "{% url 'frontend:login' %}";
    });
  }
</script>
{% endblock %}